---
import clsx from 'clsx';

import ArrowRightIcon from '~astro-icons/lucide/arrow-right';
import HelpIcon from '~astro-icons/lucide/help-circle';
import MegaphoneIcon from '~astro-icons/lucide/megaphone';

interface Props {
  type?: 'announcement' | 'help';
  href?: string;
  action?: string;
}

const { href, action = 'Learn more', type } = Astro.props;
---

<div
  class={clsx(
    'border-border/90 border-y-[1px] w-full h-[var(--height)] z-40',
    'text-sm flex items-center justify-center transition-[opacity,height] duration-200',
    'scrolled:opacity-0 scrolled:leading-[0] scrolled:border-none overflow-hidden',
    'fixed top-0 left-0 z-[9999]',
  )}
  style="--height: var(--announcement-bar-height);"
>
  {
    type === 'help' ? (
      <HelpIcon class="mr-1.5 h-4 w-4" />
    ) : (
      <MegaphoneIcon class="mb-0.5 mr-1.5 h-5 w-5" />
    )
  }

  <span class="mr-1">
    <slot />
  </span>

  <a
    class="group flex items-center rounded-md p-0.5 text-brand"
    {href}
    target="_blank"
    rel="noreferrer"
  >
    {action}
    <ArrowRightIcon
      class="h-3.5 w-3.5 -translate-x-2 opacity-0 transition-all group-hocus:translate-x-px group-hocus:opacity-100"
    />
  </a>
</div>
